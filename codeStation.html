<!doctype HTML>

<html>
<head>
	<title>CodeStation</title>
	<meta charset="utf-8" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

	<link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>

	<div id="wrapper">
		<div id="menuBar">

			<div id="logo">
				CodeStation
			</div>

			<div id="rundiv">
				<button id="runbtn"> Run code </button>
			</div>
				<ul id="toggles">
					<li class="toggle selected">HTML</li>
					<li class="toggle">CSS</li>
					<li class="toggle">JS</li>
					<li class="toggle selected" style="border:none">Result</li>
				</ul>
	</div>
		<div class="clear"> </div>
			<div class="codeContainer" id="HTMLContainer">
		
				<div class="codeLabel">HTML</div>

				<textarea id="htmlCode"><h1>Example Code!<h1></textarea>
			
				</div>

		<div class="codeContainer" id="CSSContainer">
		
			<div class="codeLabel">CSS</div>

			<textarea id="cssCode">Example Code</textarea>
		</div>

				<div class="codeContainer" id="JSContainer">
		
					<div class="codeLabel">JS</div>

					<textarea id="jsCode">Example Code</textarea>
				</div>

		<div class="codeContainer" id="ResultContainer">
		
			<div class="codeLabel" id="resultTab">Result</div>

         	<iframe id="resultFrame"></iframe>
		</div>


<script>

	var windowHeight=$(window).height();

	var menuBarHeight=$("#menuBar").height();

	var codeContainerHeight=windowHeight-menuBarHeight;
	$(".codeContainer").height(codeContainerHeight+"px");


	$(".toggle").click(function() {

		$(this).toggleClass("selected");
		
		
		var activeDiv= $(this).html();

		$("#"+activeDiv+"Container").toggle();
	


		var showingDivs= $(".codeContainer").filter(function(){


			return($(this).css("display") !="none");


		}).length;

		
		var cusWidth=100/showingDivs;

		$(".codeContainer").width(cusWidth+"%");

	});


	$("#runbtn").click(function() {

		$("iframe").contents().find("html").html('<style>'+$("#cssCode").val()+'</style>'+$("#htmlCode").val());

	


		document.getElementById("resultFrame").contentWindow.eval($("#jsCode").val());

		//use with caution 

	});

</script>


</body>
</html>